{% extends "app_manager/app_install_base.html" %} {% load bootstrap_tags staticfiles %} {% load i18n %} {% block title %}
{{ block.super }} - {% trans "Workspace" %} {% endblock %} {% block head %} {% include "geonode/ext_header.html" %} {% include "geonode/app_header.html" %} {{ block.super }}
<style>
    .buttons {
        text-align: center;
    }
    .image{
        min-height:200px;
        height:200px;
    }
    .shadowbtn{
        color: white;
        margin-right: 10px;
    }
    .divrow{
        padding: 10px;
    }
</style>
{% endblock %} {% block body %}

<script src="https://code.jquery.com/jquery-3.1.0.min.js"></script>
<script>
    $.myfunction = function (resource) {
        $.get("/api/" + resource + "?owner__username=" + "{{user}}", function (data) {
            for (i = 0; i < data.objects.length; i++) {
                if (data.objects[i].thumbnail_url) {
                    logo = data.objects[i].thumbnail_url
                }
                else {
                    logo = data.objects[i].logo
                }
                $('#' + resource).append(
                    '<div class="col-xs-12 col-sm-12 col-md-3 ">' +
                         '<div class="thumbnail">' +
                             '<img class="image" src="' + logo + '"' +
                                    'fallback-src="{{ STATIC_URL }}app_manager/img/no-image.jpg">' +
            
                                    '<div class="caption">' +
                                             '<h5>' + data.objects[i].title + '</h5>' +
                                             '<p><a href="' + data.objects[i].detail_url + '"' +
                                             'class="btn btn-primary" role="button">View</a>' +
                                             '</p>' +
                                    '</div>' +
                             '</div>' +
                    '</div>');
            }
            if (data.objects.length == 0) {

                $('#' + resource).append('<div class="col-sm-12 col-md-9">' +
                    ' <h4>No ' + resource + ' Found</h4>' +
                    '</div>')
            }
        });
    };
    $.myfunction("layers")
    $.myfunction("maps")
    $.myfunction("groups")
    $.myfunction("appinstances")
    $.myfunction("documents")
</script>
<div class="page-header">
    <a class="btn button_shadow btn-primary shadowbtn"  href="{% url 'user-activity' actor=request.user.username %}"
        role="button">
        Activities
    </a>
    <a class="btn button_shadow btn-primary " href="{% url 'profile_detail' username=request.user.username %}"
        role="button">
        Profile
    </a>
    <a class="btn button_shadow btn-primary " href="{% url 'messages_inbox' %}" role="button">
        Inbox
    </a>
</div>
<div id="page-wrapper">
    <div class="container-fluid" ng-app="workspace">
        <div class="row" id='appinstances'>
            <div class="col-xs-12 col-sm-12 col-md-3 buttons pull-right">
                <div class="row divrow" >
                    <a href="{% url 'appinstance_browse' %}?owner__username={{ request.user.username }}" class="btn btn-primary" role="button">View My Apps
                        <span class="badge">{{ my_apps.objects.count }}</span>
                    </a>
                </div>
                <div class="row divrow" >
                    <a href="{% url 'appinstance_browse' %}" class="btn btn-primary" role="button">View All Apps
                        <span class="badge">{{ created_apps.count }}</span>
                    </a>
                </div>
                <div class="row divrow" >
                    <a href="{% url 'app_manager_base_url' %}" class="btn btn-primary" role="button">Create New</a>
                </div>
            </div>
        </div>
        <hr>
        <div class="row" id='layers'>
            <h3>Layers</h3>
            <div class="col-xs-12 col-sm-12 col-md-3 buttons pull-right">
                <div class="row divrow">
                    <a href="{% url 'layer_browse' %}?owner__username={{ request.user.username }}" class="btn btn-primary" role="button">View My Layers
                        <span class="badge">{{ my_layers.objects.count }}</span>
                    </a>
                </div>
                <div class="row divrow">
                    <a href="{% url 'layer_browse' %}" class="btn btn-primary" role="button">View All Layers
                        <span class="badge">{{ layers_count }}</span>
                    </a>
                </div>
                <div class="row divrow">
                    <a href="{% url 'layer_upload' %}" class="btn btn-primary" role="button">Upload New</a>
                </div>
            </div>
        </div>
        <hr>
        <div class="row" id='maps'>
            <h3>Maps</h3>
            <div class="col-xs-12 col-sm-12 col-md-3 buttons pull-right">
                <div class="row divrow">
                    <a href="{% url 'maps_browse' %}?owner__username={{ request.user.username }}" class="btn btn-primary" role="button">View My Maps
                        <span class="badge">{{ my_maps.objects.count }}</span>
                    </a>
                </div>
                <div class="row divrow">
                    <a href="{% url 'maps_browse' %}" class="btn btn-primary" role="button">View All Maps
                        <span class="badge">{{ maps_count }}</span>
                    </a>
                </div>
                <div class="row divrow">
                    <a href="{% url 'new_map' %}" class="btn btn-primary" role="button">Create New</a>
                </div>
            </div>
        </div>
        <hr>
        <div class="row" id='documents'>
            <h3>Documents</h3>
            <div class="col-xs-12 col-sm-12 col-md-3 buttons pull-right">
                <div class="row divrow">
                    <a href="{% url 'document_browse' %}?owner__username={{ request.user.username }}" class="btn btn-primary" role="button">View My Document
                        <span class="badge">{{ documents.objects.count }}</span>
                    </a>
                </div>
                <div class="row divrow">
                    <a href="{% url 'document_browse' %}" class="btn btn-primary" role="button">View All Documents
                        <span class="badge">{{ documents_count }}</span>
                    </a>
                </div>
                <div class="row divrow">
                    <a href="{% url 'document_upload' %}" class="btn btn-primary" role="button">Upload Document</a>
                </div>
            </div>
        </div>
        <hr>
        <div class="row" id='groups'>
            <h3>Groups</h3>
            <div class="col-xs-12 col-sm-12 col-md-3 buttons pull-right">
                {% comment %} :TODO Create User Groups list {% endcomment %}
                <div class="row divrow">
                    <a href="{% url 'group_list' %}" class="btn btn-primary" role="button">View All Groups
                        <span class="badge">{{ groups_count }}</span>
                    </a>
                </div>
                <div class="row divrow">
                    <a href="{% url 'group_create' %}" class="btn btn-primary" role="button">Create Group</a>
                </div>
            </div>
        </div>
        <hr>
    </div>
</div>
{% endblock %} {% block extra_script %}
<script src="{{ STATIC_URL }}vendor/angular-img-fallback/angular.dcb-img-fallback.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.matchHeight/0.7.2/jquery.matchHeight-min.js"></script>
<script>
    $(function () {
        $('.item').matchHeight({
            byRow: false,
            property: 'height',
            target: null,
            remove: false
        });
        $('[data-toggle="popover"]').popover();
    });
</script>
<script>
    var workspace = angular.module('workspace', ['dcbImgFallback']);

</script> {% endblock %}